\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage[catalan]{babel}
\usepackage{amssymb}
\usepackage{color}

\title{Evaluacio de rendiment de politiques de planificacio}
\author{Sergi Alonso, Pablo Llueca}

\begin{document}

\lstset{
  language=C,                % choose the language of the code
  numbers=left,                   % where to put the line-numbers
  stepnumber=1,                   % the step between two line-numbers.        
  numbersep=5pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
  keywordstyle=\color{blue},
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  tabsize=4,                      % sets default tabsize to 2 spaces
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=true,         % sets if automatic breaks should only happen at whitespace
  title=\lstname,                 % show the filename of files included with \lstinputlisting;
}

\section{Workload 1}
\subsection{Descripcio del proces}
El primer workload prova el rendiment de les diferents politiques de planificacio amb processos intensius en calcul, amb molt poca entrada/sortida. El proces pare crea un fill, que tambe crea un fill (3 procesos en total) i tots calculen el n-essim terme de la succecio de fibonacci.

\subsection{Codi}
\begin{lstlisting}
  int fib(int n)
  {
    if (n == 0) return 0;
    if (n == 1) return 1;
    return fib(n-1) + fib(n-2);
  }

  void workload1(){
    int pid,pid_f,f;
    pid = fork();
    if(pid == 0){
      pid_f = fork();
      if(pid_f == 0)
      f = fib(500);
      else
      f = fib(750);
    }
    else{
      f = fib(1000);
    }
  }
\end{lstlisting}


\section{Workload 2}

\subsection{Codi}
\begin{lstlisting}
  void workload2(){
    int pid,pid_f,f,r,i;
    pid = fork();
    if(pid == 0){
      pid_f = fork();
      if(pid_f == 0){
        for(i = 0; i < 10; ++i)
        r = read(0,&buff, 10);
        write(1,"1\n",2);
      }
      else{
        for(i = 0; i < 5; ++i)
        r = read(0,&buff, 20);
        write(1,"2\n",2);
      }
    }
    else{
      for(i = 0; i < 20; ++i)
      r = read(0,&buff, 5);
      write(1,"p\n",2);
    }
  }
\end{lstlisting}

\section{Workload 3}


\end{document}